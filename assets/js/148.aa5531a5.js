(window.webpackJsonp=window.webpackJsonp||[]).push([[148],{722:function(t,e,s){"use strict";s.r(e);var i=s(10),a=Object(i.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"一、前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、前言"}},[t._v("#")]),t._v(" 一、前言")]),t._v(" "),s("h3",{attrs:{id:"_1-1-传统网站部署的流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-传统网站部署的流程"}},[t._v("#")]),t._v(" 1.1 传统网站部署的流程")]),t._v(" "),s("blockquote",[s("p",[t._v("传统的网站部署，大家在运维过程中，网站部署是运维的工作之一，网站部署的流程大致分为：需求分析—原型设计—开发代码—提交测试—内网部署—确认上线—备份数据—外网更新-最终测试，如果发现外网部署的代码有异常，需要及时回滚。（如下图所示）")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2020/01/1.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"_1-2-目前主流网站部署的流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-目前主流网站部署的流程"}},[t._v("#")]),t._v(" 1.2 目前主流网站部署的流程")]),t._v(" "),s("blockquote",[s("p",[t._v("目前主流网站部署方法，通过Jenkins工具平台实现全自动部署+测试，是一个可扩展的持续集成引擎，是一个开源软件项目，旨在提供一个开放易用的软件平台，使软件的持续集成变成可能。Jenkins非常易于安装和配置，简单易用")])]),t._v(" "),s("p",[s("strong",[t._v("简单来说方便如下人员：")])]),t._v(" "),s("ul",[s("li",[t._v("开发人员：写好代码，不需要自己进行源码编译、打包等工作，直接将代码分支存放在SVN、GIT仓库即可。")]),t._v(" "),s("li",[t._v("运维人员：减轻人工干预的错误率，同时解放运维人员繁杂的上传代码、手动备份、更新。")]),t._v(" "),s("li",[t._v("测试人员：可以通过"),s("code",[t._v("jenkins")]),t._v("进行简单的代码及网站测试。")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2020/01/2.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"_1-3-jenkins持续集成简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-jenkins持续集成简介"}},[t._v("#")]),t._v(" 1.3 Jenkins持续集成简介")]),t._v(" "),s("ul",[s("li",[t._v("持续集成(Continuous Integration)是一种软件开发实践，对于提高软件开发效率并保障软件开发质量提供了理论基础。Jenkins 是一个开源软件项目，旨在提供一个开放易用的软件平台，使持续集成变成可能。本文正是从持续集成的基本概念入手，通过具体实例，介绍了如何基于 Jenkins 快速搭建持续集成环境")]),t._v(" "),s("li",[t._v("Jenkins是一个可扩展的持续集成引擎，是一个开源软件项目，旨在提供一个开放易用的软件平台，使软件的持续集成变成可能。Jenkins非常易于安装和配置，简单易用")])]),t._v(" "),s("h3",{attrs:{id:"_1-4-持续集成意义"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-持续集成意义"}},[t._v("#")]),t._v(" 1.4 持续集成意义")]),t._v(" "),s("ul",[s("li",[t._v("持续集成中的任何一个环节都是自动完成的，无需太多的人工干预，有利于减少重复过程以节省时间、费用和工作量")]),t._v(" "),s("li",[t._v("持续集成保障了每个时间点上团队成员提交的代码是能成功集成的。换言之，任何时间点都能第一时间发现软件的集成问题，使任意时间发布可部署的软件成为了可能")]),t._v(" "),s("li",[t._v("持续集成还能利于软件本身的发展趋势，这点在需求不明确或是频繁性变更的情景中尤其重要，持续集成的质量能帮助团队进行有效决策，同时建立团队对开发产品的信心")])]),t._v(" "),s("h3",{attrs:{id:"_1-5-持续集成组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-持续集成组件"}},[t._v("#")]),t._v(" 1.5 持续集成组件")]),t._v(" "),s("ul",[s("li",[t._v("一个自动构建过程，包括自动编译、分发、部署和测试；")]),t._v(" "),s("li",[t._v("一个代码存储库，即需要版本控制软件来保障代码的可维护性，同时作为构建过程的素材库，例如SVN、GIT代码库；")]),t._v(" "),s("li",[t._v("一个jenkins持续集成服务器(123.57.11.203服务器就是一个配置简单和使用方便的持续集成服务器)")])]),t._v(" "),s("h2",{attrs:{id:"二、环境搭建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、环境搭建"}},[t._v("#")]),t._v(" 二、环境搭建")]),t._v(" "),s("h3",{attrs:{id:"_2-1-jenkins安装部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-jenkins安装部署"}},[t._v("#")]),t._v(" 2.1 Jenkins安装部署")]),t._v(" "),s("ul",[s("li",[t._v("地址http://mirrors.jenkins-ci.org/下载适合的Jenkins版本")])]),t._v(" "),s("blockquote",[s("p",[t._v("由于"),s("code",[t._v("Jenkins")]),t._v("属于一个"),s("code",[t._v("JAVA")]),t._v(" 代码，需要java容器才能运行jenkins，所以需要安装JDK+Tomcat")])]),t._v(" "),s("p",[s("strong",[t._v("这里我们以RPM方式部署jenkins")])]),t._v(" "),s("blockquote",[s("p",[t._v("下载对应的"),s("code",[t._v("RPM")]),t._v("包 https://pkg.jenkins.io/redhat-stable/")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("rpm -ih jenkins-2.7.4-1.1.noarch.rpm\n")])])]),s("p",[s("strong",[t._v("jenkins 常用命令")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("service jenkins start/stop/restart\n\nchkconfig jenkins on\n")])])]),s("p",[s("strong",[t._v("jenkins的目录结构")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("/usr/lib/jenkins/jenkins.war     #WAR包 \n\n/etc/sysconfig/jenkins       　　 #配置文件\n\n/var/lib/jenkins/        　　　　   #默认的JENKINS_HOME目录\n\n/var/log/jenkins/jenkins.log      #Jenkins日志文件\n")])])]),s("p",[s("strong",[t._v("启动jenkins")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("service jenkins start\n")])])]),s("p",[s("strong",[t._v("修改jenkins端口")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('vim /etc/sysconfig/jenkins\n\nJENKINS_PORT="8888"\n')])])]),s("p",[s("strong",[t._v("防火墙开启8888端口")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[root@localhost modules]# vim /etc/sysconfig/iptables\n# Firewall configuration written by system-config-firewall\n# Manual customization of this file is not recommended.\n*filter\n:INPUT ACCEPT [0:0]\n:FORWARD ACCEPT [0:0]\n:OUTPUT ACCEPT [0:0]\n-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT\n-A INPUT -p icmp -j ACCEPT\n-A INPUT -i lo -j ACCEPT\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 8080 -j ACCEPT\n\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 8888 -j ACCEPT # here\n\n-A INPUT -j REJECT --reject-with icmp-host-prohibited\n-A FORWARD -j REJECT --reject-with icmp-host-prohibited\nCOMMIT\n")])])]),s("p",[t._v("再次启动jenkins：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[root@localhost modules]# service jenkins start\n")])])]),s("blockquote",[s("p",[t._v("打开地址 127.0.0.1:8888")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2020/01/3.png",alt:""}})]),t._v(" "),s("p",[t._v("出现此提示说明，启动成功！因为是第一次安装，所以得输入默认密码，默认密码在红框标注的位置。")]),t._v(" "),s("p",[t._v("查看默认密码将密码粘贴到文本框中：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[root@localhost secrets]# cat /var/lib/jenkins/secrets/initialAdminPassword\n\n97c675381d524414ba11e61c4f4b7ef0\n")])])]),s("p",[s("strong",[t._v("安装插件")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2020/01/4.png",alt:""}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2020/01/5.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"_2-2-基础环境配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-基础环境配置"}},[t._v("#")]),t._v(" 2.2 基础环境配置")]),t._v(" "),s("h4",{attrs:{id:"_2-2-1-插件安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-插件安装"}},[t._v("#")]),t._v(" 2.2.1 插件安装")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2020/01/6.png",alt:""}})]),t._v(" "),s("blockquote",[s("p",[t._v("安装Publish Over SSH用于执行构建后的操作")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2020/01/7.png",alt:""}})]),t._v(" "),s("blockquote",[s("p",[t._v("安装nodejs环境")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2020/01/8.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"_2-2-2-配置信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2-配置信息"}},[t._v("#")]),t._v(" 2.2.2 配置信息")]),t._v(" "),s("p",[s("strong",[t._v("配置git命令")])]),t._v(" "),s("blockquote",[s("p",[t._v("whereis git")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2020/01/9.png",alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("配置node信息")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2020/01/10.png",alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("配置git账户及ssh用户信息")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2020/01/11.png",alt:""}}),t._v(" "),s("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2020/01/12.png",alt:""}}),t._v(" "),s("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2020/01/13.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"_2-3-创建项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-创建项目"}},[t._v("#")]),t._v(" 2.3 创建项目")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2020/01/14.png",alt:""}}),t._v(" "),s("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2020/01/15.png",alt:""}}),t._v(" "),s("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2020/01/16.png",alt:""}}),t._v(" "),s("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2020/01/17.png",alt:""}}),t._v(" "),s("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2020/01/18.png",alt:""}}),t._v(" "),s("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2020/01/19.png",alt:""}}),t._v(" "),s("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2020/01/20.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"_2-4-git提交自动触发构建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-git提交自动触发构建"}},[t._v("#")]),t._v(" 2.4 git提交自动触发构建")]),t._v(" "),s("blockquote",[s("p",[t._v("根据下面填写地址，以"),s("code",[t._v("bitbucket git")]),t._v("仓库配置为例子")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2020/01/17.png",alt:""}}),t._v(" "),s("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2020/01/21.png",alt:""}}),t._v(" "),s("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2020/01/22.png",alt:""}})]),t._v(" "),s("blockquote",[s("p",[t._v("这样提交git代码触发"),s("code",[t._v("git hooks")]),t._v("操作去请求 "),s("code",[t._v("http://192.168.1.43:8991/job/test/build?token=cxk")]),t._v("启动"),s("code",[t._v("jenkins")]),t._v("任务，以达成自动部署任务")])])])}),[],!1,null,null,null);e.default=a.exports}}]);