(window.webpackJsonp=window.webpackJsonp||[]).push([[155],{729:function(t,a,s){"use strict";s.r(a);var e=s(10),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"一、restful-api-简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、restful-api-简介"}},[t._v("#")]),t._v(" 一、RESTful API 简介")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2019/10/509.png",alt:""}}),t._v(" "),s("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2019/10/510.png",alt:""}}),t._v(" "),s("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2019/10/511.png",alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("总结一下什么是RESTful架构")])]),t._v(" "),s("ul",[s("li",[t._v("每一个"),s("code",[t._v("URI")]),t._v("代表一种资源")]),t._v(" "),s("li",[t._v("客户端和服务器之间，传递这种资源的某种表现层")]),t._v(" "),s("li",[t._v("客户端通过四个"),s("code",[t._v("HTTP")]),t._v("动词("),s("code",[t._v("GET、POST、PUT、DELETE")]),t._v(')，对服务器端资源进行操作，实现"表现层状态转化"')])]),t._v(" "),s("h2",{attrs:{id:"二、restful-api-设计"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、restful-api-设计"}},[t._v("#")]),t._v(" 二、RESTful API 设计")]),t._v(" "),s("h3",{attrs:{id:"_2-1、协议"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1、协议"}},[t._v("#")]),t._v(" 2.1、协议")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("API")]),t._v("与用户的通信协议，总是使用"),s("code",[t._v("HTTPs")]),t._v("协议")])]),t._v(" "),s("h3",{attrs:{id:"_2-2、域名"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2、域名"}},[t._v("#")]),t._v(" 2.2、域名")]),t._v(" "),s("ul",[s("li",[t._v("应该尽量将"),s("code",[t._v("API")]),t._v("部署在专用域名之下")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("https"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com\n")])])]),s("ul",[s("li",[t._v("如果确定API很简单，不会有进一步扩展，可以考虑放在主域名下")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("https"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("example"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("api"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\n")])])]),s("h3",{attrs:{id:"_2-3、版本（versioning）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3、版本（versioning）"}},[t._v("#")]),t._v(" 2.3、版本（Versioning）")]),t._v(" "),s("ul",[s("li",[t._v("应该将"),s("code",[t._v("API")]),t._v("的版本号放入"),s("code",[t._v("URL")])])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("https"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("v1"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\n")])])]),s("h3",{attrs:{id:"_2-4、路径（endpoint）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-4、路径（endpoint）"}},[t._v("#")]),t._v(" 2.4、路径（Endpoint）")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("表示"),s("code",[t._v("API")]),t._v("的具体网址")])]),t._v(" "),s("li",[s("p",[t._v("在"),s("code",[t._v("RESTful")]),t._v("架构中，每个网址代表一种资源（"),s("code",[t._v("resource")]),t._v("），所以网址中不能有动词，只能有名词")])]),t._v(" "),s("li",[s("p",[t._v("举例来说，有一个"),s("code",[t._v("API")]),t._v("提供动物园（"),s("code",[t._v("zoo")]),t._v("）的信息，还包括各种动物和雇员的信息，则它的路径应该设计成下面这样")])])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("https"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("v1"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("zoos\nhttps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("v1"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("animals\nhttps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("v1"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("employees\n")])])]),s("h3",{attrs:{id:"_2-5、http动词"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-5、http动词"}},[t._v("#")]),t._v(" 2.5、HTTP动词")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("对于资源的具体操作类型，由"),s("code",[t._v("HTTP")]),t._v("动词表示")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("GET（SELECT）")]),t._v("：从服务器取出资源（一项或多项）。")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("POST（CREATE）")]),t._v("：在服务器新建一个资源。")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("PUT（UPDATE）")]),t._v("：在服务器更新资源（客户端提供改变后的完整资源）。")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("PATCH（UPDATE）")]),t._v("：在服务器更新资源（客户端提供改变的属性）。")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("DELETE（DELETE）")]),t._v("：从服务器删除资源。")])])]),t._v(" "),s("blockquote",[s("p",[t._v("下面是一些例子")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GET")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("zoos：列出所有动物园\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("POST")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("zoos：新建一个动物园\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GET")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("zoos"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),t._v("：获取某个指定动物园的信息\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PUT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("zoos"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),t._v("：更新某个指定动物园的信息（提供该动物园的全部信息）\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PATCH")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("zoos"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),t._v("：更新某个指定动物园的信息（提供该动物园的部分信息）\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DELETE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("zoos"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),t._v("：删除某个动物园\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GET")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("zoos"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("animals：列出某个指定动物园的所有动物\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DELETE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("zoos"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("animals"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),t._v("：删除某个指定动物园的指定动物\n")])])]),s("h3",{attrs:{id:"_2-6、过滤信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-6、过滤信息"}},[t._v("#")]),t._v(" 2.6、过滤信息")]),t._v(" "),s("blockquote",[s("p",[t._v("如果记录数量很多，服务器不可能都将它们返回给用户。API应该提供参数，过滤返回结果")])]),t._v(" "),s("ul",[s("li",[t._v("下面是一些常见的参数\n"),s("ul",[s("li",[s("code",[t._v("?limit=10")]),t._v("：指定返回记录的数量")]),t._v(" "),s("li",[s("code",[t._v("?offset=10")]),t._v("：指定返回记录的开始位置。")]),t._v(" "),s("li",[s("code",[t._v("?page=2&per_page=100")]),t._v("：指定第几页，以及每页的记录数。")]),t._v(" "),s("li",[s("code",[t._v("?sortby=name&order=asc")]),t._v("：指定返回结果按照哪个属性排序，以及排序顺序。")]),t._v(" "),s("li",[s("code",[t._v("?animal_type_id=1")]),t._v("：指定筛选条件")])])])]),t._v(" "),s("blockquote",[s("p",[t._v("参数的设计允许存在冗余，即允许API路径和URL参数偶尔有重复。比如，"),s("code",[t._v("GET /zoo/ID/animals")]),t._v(" 与 "),s("code",[t._v("GET /animals?zoo_id=ID")]),t._v(" 的含义是相同的")])]),t._v(" "),s("h3",{attrs:{id:"_2-7、状态码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-7、状态码"}},[t._v("#")]),t._v(" 2.7、状态码")]),t._v(" "),s("blockquote",[s("p",[t._v("服务器向用户返回的状态码和提示信息")])]),t._v(" "),s("h3",{attrs:{id:"_2-8、错误处理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-8、错误处理"}},[t._v("#")]),t._v(" 2.8、错误处理")]),t._v(" "),s("blockquote",[s("p",[t._v("如果状态码是"),s("code",[t._v("4xx")]),t._v("，就应该向用户返回出错信息。一般来说，返回的信息中将"),s("code",[t._v("error")]),t._v("作为键名，出错信息作为键值即可")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Invalid API key"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"_2-9、返回结果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-9、返回结果"}},[t._v("#")]),t._v(" 2.9、返回结果")]),t._v(" "),s("ul",[s("li",[t._v("针对不同操作，服务器向用户返回的结果应该符合以下规范")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GET")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("collection：返回资源对象的列表（数组）\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GET")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("collection"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("resource：返回单个资源对象\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("POST")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("collection：返回新生成的资源对象\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PUT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("collection"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("resource：返回完整的资源对象\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PATCH")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("collection"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("resource：返回完整的资源对象\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DELETE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("collection"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("resource：返回一个空文档\n")])])]),s("h3",{attrs:{id:"_2-10、hypermedia-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-10、hypermedia-api"}},[t._v("#")]),t._v(" 2.10、Hypermedia API")]),t._v(" "),s("blockquote",[s("p",[s("code",[t._v("RESTful API")]),t._v("最好做到"),s("code",[t._v("Hypermedia")]),t._v("，即返回结果中提供链接，连向其他"),s("code",[t._v("API")]),t._v("方法，使得用户不查文档，也知道下一步应该做什么")])]),t._v(" "),s("ul",[s("li",[t._v("比如，当用户向"),s("code",[t._v("api.example.com")]),t._v("的根目录发出请求，会得到这样一个文档")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"link"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rel"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"collection https://www.example.com/zoos"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"href"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://api.example.com/zoos"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"title"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"List of zoos"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"application/vnd.yourformat+json"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[t._v("上面代码表示，文档中有一个"),s("code",[t._v("link")]),t._v("属性，用户读取这个属性就知道下一步该调用什么"),s("code",[t._v("API")]),t._v("了。"),s("code",[t._v("rel")]),t._v("表示这个"),s("code",[t._v("API")]),t._v("与当前网址的关系（collection关系，并给出该collection的网址），"),s("code",[t._v("href")]),t._v("表示"),s("code",[t._v("API")]),t._v("的路径，"),s("code",[t._v("title")]),t._v("表示"),s("code",[t._v("API")]),t._v("的标题，"),s("code",[t._v("type")]),t._v("表示返回类型")])]),t._v(" "),s("h2",{attrs:{id:"三、参考资料"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、参考资料"}},[t._v("#")]),t._v(" 三、参考资料")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2014/05/restful_api.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("restful_api"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=r.exports}}]);