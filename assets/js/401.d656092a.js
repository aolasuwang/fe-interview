(window.webpackJsonp=window.webpackJsonp||[]).push([[401],{920:function(t,s,a){"use strict";a.r(s);var n=a(10),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"一、使用webpack-bundle-analyzer插件分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、使用webpack-bundle-analyzer插件分析"}},[t._v("#")]),t._v(" 一、使用webpack-bundle-analyzer插件分析")]),t._v(" "),a("p",[a("strong",[t._v("安装插件")])]),t._v(" "),a("blockquote",[a("p",[t._v("https://www.npmjs.com/package/webpack-bundle-analyzer")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm install webpack-bundle-analyzer –save-dev\n")])])]),a("p",[a("strong",[t._v("配置")])]),t._v(" "),a("blockquote",[a("p",[t._v("在"),a("code",[t._v("package.json中")])])]),t._v(" "),a("p",[t._v("传入环境变量"),a("code",[t._v("ANALYZE")]),t._v("，最后"),a("code",[t._v("process.env.ANALYZE")]),t._v("来读取")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('"scripts": {\n  "build": "node scripts/build.js",\n  "analyze": "cross-env ANALYZE=1 npm run build"\n}\n')])])]),a("blockquote",[a("p",[t._v("在"),a("code",[t._v("build/webpack.prod.config.js")]),t._v("的"),a("code",[t._v("plugin")]),t._v("后面加上判断")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("plugins"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("concat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ANALYZE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BundleAnalyzerPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  可以是`server`，`static`或`disabled`。")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  在`server`模式下，分析器将启动HTTP服务器来显示软件包报告。")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  在“静态”模式下，会生成带有报告的单个HTML文件。")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  在`disabled`模式下，你可以使用这个插件来将`generateStatsFile`设置为`true`来生成Webpack Stats JSON文件。")]),t._v("\n    analyzerMode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'server'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  将在“服务器”模式下使用的主机启动HTTP服务器。")]),t._v("\n    analyzerHost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'127.0.0.1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  将在“服务器”模式下使用的端口启动HTTP服务器。")]),t._v("\n    analyzerPort"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8888")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  路径捆绑，将在`static`模式下生成的报告文件。")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  相对于捆绑输出目录。")]),t._v("\n    reportFilename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'report.html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  模块大小默认显示在报告中。")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  应该是`stat`，`parsed`或者`gzip`中的一个。")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  有关更多信息，请参见“定义”一节。")]),t._v("\n    defaultSizes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'parsed'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  在默认浏览器中自动打开报告")]),t._v("\n    openAnalyzer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  如果为true，则Webpack Stats JSON文件将在bundle输出目录中生成")]),t._v("\n    generateStatsFile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  如果`generateStatsFile`为`true`，将会生成Webpack Stats JSON文件的名字。")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  相对于捆绑输出目录。")]),t._v("\n    statsFilename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'stats.json'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  stats.toJson（）方法的选项。")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  例如，您可以使用`source：false`选项排除统计文件中模块的来源。")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  在这里查看更多选项：https：  //github.com/webpack/webpack/blob/webpack-1/lib/Stats.js#L21")]),t._v("\n    statsOptions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    logLevel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'info'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 日志级别。可以是'信息'，'警告'，'错误'或'沉默'。")]),t._v("\n  \t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("启动")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm run analyze\n")])])]),a("blockquote",[a("p",[t._v("在对应地址后面添加端口"),a("code",[t._v("8888")]),t._v("，即可得到一个可视化模块大小界面")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2019/10/636.png",alt:""}})]),t._v(" "),a("blockquote",[a("p",[t._v("这个插件就是从"),a("code",[t._v("stats.json")]),t._v("中获取"),a("code",[t._v("chunks")]),t._v("然后最终使用"),a("code",[t._v("Canvas")]),t._v("画图。具体代码位于"),a("code",[t._v("analyzer.js")]),t._v("中的"),a("code",[t._v("getViewerData")]),t._v("方法")])]),t._v(" "),a("h2",{attrs:{id:"二、使用官方提供的在线工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、使用官方提供的在线工具"}},[t._v("#")]),t._v(" 二、使用官方提供的在线工具")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("webpack --proile --json > stats.json")]),t._v(" 生成一份"),a("code",[t._v("json")]),t._v("文件上传到http://webpack.github.io/analyse 分析")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2019/10/637.png",alt:""}})])])}),[],!1,null,null,null);s.default=e.exports}}]);