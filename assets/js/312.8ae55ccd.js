(window.webpackJsonp=window.webpackJsonp||[]).push([[312],{1411:function(t,s,a){"use strict";a.r(s);var n=a(10),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"一、react-v16-0前的生命周期"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、react-v16-0前的生命周期"}},[t._v("#")]),t._v(" 一、React v16.0前的生命周期")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2019/10/417.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"_1-1-第一个是组件初始化-initialization-阶段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-第一个是组件初始化-initialization-阶段"}},[t._v("#")]),t._v(" 1.1 第一个是组件初始化(initialization)阶段")]),t._v(" "),a("blockquote",[a("p",[t._v("也就是以下代码中类的构造方法( "),a("code",[t._v("constructor()")]),t._v(" ),Test类继承了react "),a("code",[t._v("Component")]),t._v("这个基类，也就继承这个"),a("code",[t._v("react")]),t._v("的基类，才能有"),a("code",[t._v("render()")]),t._v(",生命周期等方法可以使用，这也说明为什么函数组件不能使用这些方法的原因")])]),t._v(" "),a("p",[a("code",[t._v("super(props)")]),t._v("用来调用基类的构造方法( "),a("code",[t._v("constructor()")]),t._v(" ), 也将父组件的props注入给子组件，功子组件读取(组件中"),a("code",[t._v("props")]),t._v("只读不可变，"),a("code",[t._v("state")]),t._v("可变)而"),a("code",[t._v("constructor()")]),t._v("用来做一些组件的初始化工作，如定义"),a("code",[t._v("this.state")]),t._v("的初始内容")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Component "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Test")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"_1-2-第二个是组件的挂载-mounting-阶段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-第二个是组件的挂载-mounting-阶段"}},[t._v("#")]),t._v(" 1.2 第二个是组件的挂载(Mounting)阶段")]),t._v(" "),a("p",[a("strong",[t._v("此阶段分为componentWillReceiveProps，shouldComponentUpdate，componentWillUpdate，render，componentDidUpdate")])]),t._v(" "),a("h4",{attrs:{id:"_1-2-1-componentwillmount"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-componentwillmount"}},[t._v("#")]),t._v(" 1.2.1 componentWillMount")]),t._v(" "),a("blockquote",[a("p",[t._v("在组件挂载到DOM前调用，且只会被调用一次，在这边调用"),a("code",[t._v("this.setState")]),t._v("不会引起组件重新渲染，也可以把写在这边的内容提前到"),a("code",[t._v("constructor()")]),t._v("中，所以项目中很少用")])]),t._v(" "),a("h4",{attrs:{id:"_1-2-2-render"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2-render"}},[t._v("#")]),t._v(" 1.2.2 render")]),t._v(" "),a("blockquote",[a("p",[t._v("根据组件的"),a("code",[t._v("props")]),t._v("和"),a("code",[t._v("state")]),t._v("（无两者的重传递和重赋值，论值是否有变化，都可以引起组件重新"),a("code",[t._v("render")]),t._v("） ，"),a("code",[t._v("return")]),t._v(" 一个"),a("code",[t._v("React")]),t._v("元素（描述组件，即"),a("code",[t._v("UI")]),t._v("），不负责组件实际渲染工作，之后由"),a("code",[t._v("React")]),t._v("自身根据此元素去渲染出页面"),a("code",[t._v("DOM")]),t._v("。"),a("code",[t._v("render")]),t._v("是纯函数（"),a("code",[t._v("Pure function")]),t._v("：函数的返回结果只依赖于它的参数；函数执行过程里面没有副作用），不能在里面执行"),a("code",[t._v("this.setState")]),t._v("，会有改变组件状态的副作用")])]),t._v(" "),a("h4",{attrs:{id:"_1-2-3-componentdidmount"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-3-componentdidmount"}},[t._v("#")]),t._v(" 1.2.3 componentDidMount")]),t._v(" "),a("blockquote",[a("p",[t._v("组件挂载到"),a("code",[t._v("DOM")]),t._v("后调用，且只会被调用一次")])]),t._v(" "),a("h3",{attrs:{id:"_1-3-第三个是组件的更新-update-阶段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-第三个是组件的更新-update-阶段"}},[t._v("#")]),t._v(" 1.3 第三个是组件的更新(update)阶段")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("setState")]),t._v("引起的"),a("code",[t._v("state")]),t._v("更新或父组件重新"),a("code",[t._v("render")]),t._v("引起的"),a("code",[t._v("props")]),t._v("更新，更新后的"),a("code",[t._v("state")]),t._v("和"),a("code",[t._v("props")]),t._v("相对之前无论是否有变化，都将引起子组件的重新"),a("code",[t._v("render")])])]),t._v(" "),a("h4",{attrs:{id:"_1-3-1-造成组件更新有两类（三种）情况"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-1-造成组件更新有两类（三种）情况"}},[t._v("#")]),t._v(" 1.3.1 造成组件更新有两类（三种）情况")]),t._v(" "),a("p",[a("strong",[t._v("1. 父组件重新render")])]),t._v(" "),a("blockquote",[a("p",[t._v("父组件重新"),a("code",[t._v("render")]),t._v("引起子组件重新"),a("code",[t._v("render")]),t._v("的情况有两种")])]),t._v(" "),a("ul",[a("li",[t._v("a. 直接使用,每当父组件重新"),a("code",[t._v("render")]),t._v("导致的重传"),a("code",[t._v("props")]),t._v("，子组件将直接跟着重新渲染，无论"),a("code",[t._v("props")]),t._v("是否有变化。可通过"),a("code",[t._v("shouldComponentUpdate")]),t._v("方法优化")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Child")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("shouldComponentUpdate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("nextProps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 应该使用这个方法，否则无论props是否有变化都将会导致组件跟着重新渲染")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("someThings "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("someThings"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("someThings"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("b.在"),a("code",[t._v("componentWillReceiveProps")]),t._v("方法中，将"),a("code",[t._v("props")]),t._v("转换成自己的"),a("code",[t._v("state")])])]),t._v(" "),a("div",{staticClass:"language-jsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-jsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Child")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            someThings"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("someThings\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentWillReceiveProps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("nextProps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 父组件重传props时就会调用这个方法")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("someThings"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nextProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("someThings"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("someThings"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("blockquote",[a("p",[t._v("在该函数("),a("code",[t._v("componentWillReceiveProps")]),t._v(")中调用 "),a("code",[t._v("this.setState()")]),t._v(" 将不会引起第二次渲染")])]),t._v(" "),a("p",[t._v("是因为"),a("code",[t._v("componentWillReceiveProps")]),t._v("中判断"),a("code",[t._v("props")]),t._v("是否变化了，若变化了，"),a("code",[t._v("this.setState")]),t._v("将引起"),a("code",[t._v("state")]),t._v("变化，从而引起"),a("code",[t._v("render")]),t._v("，此时就没必要再做第二次因重传"),a("code",[t._v("props")]),t._v("引起的"),a("code",[t._v("render")]),t._v("了，不然重复做一样的渲染了")]),t._v(" "),a("p",[a("strong",[t._v("2. 组件本身调用setState，无论state有没有变化。可通过shouldComponentUpdate方法优化")])]),t._v(" "),a("div",{staticClass:"language-jsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-jsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Child")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          someThings"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("shouldComponentUpdate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("nextStates")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 应该使用这个方法，否则无论state是否有变化都将会导致组件重新渲染")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextStates"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("someThings "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("someThings"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n   "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handleClick")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 虽然调用了setState ，但state并无变化")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" preSomeThings "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("someThings\n         "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            someThings"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" preSomeThings\n         "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div onClick "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handleClick"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("someThings"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"_1-3-2-componentwillreceiveprops-nextprops"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-2-componentwillreceiveprops-nextprops"}},[t._v("#")]),t._v(" 1.3.2 componentWillReceiveProps(nextProps)")]),t._v(" "),a("blockquote",[a("p",[t._v("此方法只调用于"),a("code",[t._v("props")]),t._v("引起的组件更新过程中，参数"),a("code",[t._v("nextProps")]),t._v("是父组件传给当前组件的新"),a("code",[t._v("props")]),t._v("。但父组件"),a("code",[t._v("render")]),t._v("方法的调用不能保证重传给当前组件的"),a("code",[t._v("props")]),t._v("是有变化的，所以在此方法中根据"),a("code",[t._v("nextProps")]),t._v("和"),a("code",[t._v("this.props")]),t._v("来查明重传的"),a("code",[t._v("props")]),t._v("是否改变，以及如果改变了要执行啥，比如根据新的"),a("code",[t._v("props")]),t._v("调用"),a("code",[t._v("this.setState")]),t._v("出发当前组件的重新"),a("code",[t._v("render")])])]),t._v(" "),a("h4",{attrs:{id:"_1-3-3-shouldcomponentupdate-nextprops-nextstate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-3-shouldcomponentupdate-nextprops-nextstate"}},[t._v("#")]),t._v(" 1.3.3 shouldComponentUpdate(nextProps, nextState)")]),t._v(" "),a("blockquote",[a("p",[t._v("此方法通过比较"),a("code",[t._v("nextProps")]),t._v("，"),a("code",[t._v("nextState")]),t._v("及当前组件的"),a("code",[t._v("this.props")]),t._v("，"),a("code",[t._v("this.state")]),t._v("，返回"),a("code",[t._v("true")]),t._v("时当前组件将继续执行更新过程，返回"),a("code",[t._v("false")]),t._v("则当前组件更新停止，以此可用来减少组件的不必要渲染，优化组件性能。")])]),t._v(" "),a("p",[t._v("ps：这边也可以看出，就算"),a("code",[t._v("componentWillReceiveProps()")]),t._v("中执行了"),a("code",[t._v("this.setState")]),t._v("，更新了"),a("code",[t._v("state")]),t._v("，但在"),a("code",[t._v("render")]),t._v("前（如"),a("code",[t._v("shouldComponentUpdate")]),t._v("，"),a("code",[t._v("componentWillUpdate")]),t._v("），"),a("code",[t._v("this.state")]),t._v("依然指向更新前的"),a("code",[t._v("state")]),t._v("，不然"),a("code",[t._v("nextState")]),t._v("及当前组件的"),a("code",[t._v("this.state")]),t._v("的对比就一直是"),a("code",[t._v("true")]),t._v("了")]),t._v(" "),a("h4",{attrs:{id:"_1-3-4-componentwillupdate-nextprops-nextstate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-4-componentwillupdate-nextprops-nextstate"}},[t._v("#")]),t._v(" 1.3.4 componentWillUpdate(nextProps, nextState)")]),t._v(" "),a("blockquote",[a("p",[t._v("此方法在调用"),a("code",[t._v("render")]),t._v("方法前执行，在这边可执行一些组件更新发生前的工作，一般较少用")])]),t._v(" "),a("h4",{attrs:{id:"_1-3-5-componentdidupdate-prevprops-prevstate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-5-componentdidupdate-prevprops-prevstate"}},[t._v("#")]),t._v(" 1.3.5 componentDidUpdate(prevProps, prevState)")]),t._v(" "),a("blockquote",[a("p",[t._v("此方法在组件更新后被调用，可以操作组件更新的"),a("code",[t._v("DOM")]),t._v("，"),a("code",[t._v("prevProps")]),t._v("和"),a("code",[t._v("prevState")]),t._v("这两个参数指的是组件更新前的"),a("code",[t._v("props")]),t._v("和"),a("code",[t._v("state")])])]),t._v(" "),a("h3",{attrs:{id:"_1-4-卸载阶段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-卸载阶段"}},[t._v("#")]),t._v(" 1.4 卸载阶段")]),t._v(" "),a("blockquote",[a("p",[t._v("此阶段只有一个生命周期方法："),a("code",[t._v("componentWillUnmount")])])]),t._v(" "),a("p",[t._v("此方法在组件被卸载前调用，可以在这里执行一些清理工作，比如清楚组件中使用的定时器，清除"),a("code",[t._v("componentDidMount")]),t._v("中手动创建的"),a("code",[t._v("DOM")]),t._v("元素等，以避免引起内存泄漏")]),t._v(" "),a("h2",{attrs:{id:"二、react-v16-4-的生命周期"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、react-v16-4-的生命周期"}},[t._v("#")]),t._v(" 二、React v16.4 的生命周期")]),t._v(" "),a("p",[a("strong",[t._v("React v16.4 的生命周期图")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2019/10/418.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"_2-1-变更缘由"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-变更缘由"}},[t._v("#")]),t._v(" 2.1 变更缘由")]),t._v(" "),a("blockquote",[a("p",[t._v("原来（"),a("code",[t._v("React v16.0")]),t._v("前）的生命周期在"),a("code",[t._v("React v16")]),t._v("推出的"),a("code",[t._v("Fiber")]),t._v("之后就不合适了，因为如果要开启"),a("code",[t._v("async rendering")]),t._v("，在"),a("code",[t._v("render")]),t._v("函数之前的所有函数，都有可能被执行多次")])]),t._v(" "),a("p",[a("strong",[t._v("原来（React v16.0前）的生命周期有哪些是在render前执行的呢？")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("componentWillMount")])]),t._v(" "),a("li",[a("code",[t._v("componentWillReceiveProps")])]),t._v(" "),a("li",[a("code",[t._v("shouldComponentUpdate")])]),t._v(" "),a("li",[a("code",[t._v("componentWillUpdate")])])]),t._v(" "),a("blockquote",[a("p",[t._v("如果开发者开了"),a("code",[t._v("async rendering")]),t._v("，而且又在以上这些"),a("code",[t._v("render")]),t._v("前执行的生命周期方法做"),a("code",[t._v("AJAX")]),t._v("请求的话，那"),a("code",[t._v("AJAX")]),t._v("将被无谓地多次调用。而且在"),a("code",[t._v("componentWillMount")]),t._v("里发起"),a("code",[t._v("AJAX")]),t._v("，不管多快得到结果也赶不上首次"),a("code",[t._v("render")]),t._v("，而且"),a("code",[t._v("componentWillMount")]),t._v("在服务器端渲染也会被调用到")])]),t._v(" "),a("ul",[a("li",[t._v("所以除了"),a("code",[t._v("shouldComponentUpdate")]),t._v("，其他在"),a("code",[t._v("render")]),t._v("函数之前的所有函数（"),a("code",[t._v("componentWillMount")]),t._v("，"),a("code",[t._v("componentWillReceiveProps")]),t._v("，"),a("code",[t._v("componentWillUpdate")]),t._v("）都被"),a("code",[t._v("getDerivedStateFromProps")]),t._v("替代")]),t._v(" "),a("li",[t._v("也就是用一个静态函数"),a("code",[t._v("getDerivedStateFromProps")]),t._v("来取代被"),a("code",[t._v("deprecate")]),t._v("的几个生命周期函数，就是强制开发者在"),a("code",[t._v("render")]),t._v("之前只做无副作用的操作，而且能做的操作局限在根据"),a("code",[t._v("props")]),t._v("和"),a("code",[t._v("state")]),t._v("决定新的"),a("code",[t._v("state")])])]),t._v(" "),a("blockquote",[a("p",[t._v("React v16.0刚推出的时候，是增加了一个"),a("code",[t._v("componentDidCatch")]),t._v("生命周期函数，这只是一个增量式修改，完全不影响原有生命周期函数；但是，到了"),a("code",[t._v("React v16.3")]),t._v("，大改动来了，引入了两个新的生命周期函数")])]),t._v(" "),a("h3",{attrs:{id:"_2-2-引入了两个新的生命周期函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-引入了两个新的生命周期函数"}},[t._v("#")]),t._v(" 2.2 引入了两个新的生命周期函数")]),t._v(" "),a("h4",{attrs:{id:"_2-2-1-getderivedstatefromprops"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-getderivedstatefromprops"}},[t._v("#")]),t._v(" 2.2.1 getDerivedStateFromProps")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("getDerivedStateFromProps")]),t._v("本来（React v16.3中）是只在创建和更新（由父组件引发部分），也就是不是不由父组件引发，那么"),a("code",[t._v("getDerivedStateFromProps")]),t._v("也不会被调用，如自身"),a("code",[t._v("setState")]),t._v("引发或者"),a("code",[t._v("forceUpdate")]),t._v("引发")])]),t._v(" "),a("p",[a("strong",[t._v("React v16.3 的生命周期图")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://poetries1.gitee.io/img-repo/2019/10/419.png",alt:""}})]),t._v(" "),a("blockquote",[a("p",[t._v("这样的话理解起来有点乱，在"),a("code",[t._v("React v16.4")]),t._v("中改正了这一点，让"),a("code",[t._v("getDerivedStateFromProps")]),t._v("无论是"),a("code",[t._v("Mounting")]),t._v("还是"),a("code",[t._v("Updating")]),t._v("，也无论是因为什么引起的"),a("code",[t._v("Updating")]),t._v("，全部都会被调用，具体可看"),a("code",[t._v("React v16.4")]),t._v("的生命周期图")])]),t._v(" "),a("p",[a("strong",[t._v("React v16.4后的getDerivedStateFromProps")])]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("static getDerivedStateFromProps(props, state)")]),t._v(" 在组件创建时和更新时的render方法之前调用，它应该返回一个对象来更新状态，或者返回"),a("code",[t._v("null")]),t._v("来不更新任何内容")])]),t._v(" "),a("h4",{attrs:{id:"_2-2-2-getsnapshotbeforeupdate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2-getsnapshotbeforeupdate"}},[t._v("#")]),t._v(" 2.2.2 getSnapshotBeforeUpdate")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("getSnapshotBeforeUpdate()")]),t._v(" 被调用于"),a("code",[t._v("render")]),t._v("之后，可以读取但无法使用DOM的时候。它使您的组件可以在可能更改之前从DOM捕获一些信息（例如滚动位置）。此生命周期返回的任何值都将作为参数传递给"),a("code",[t._v("componentDidUpdate（）")])])]),t._v(" "),a("p",[t._v("官网给的例子")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ScrollingList")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("listRef "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createRef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSnapshotBeforeUpdate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prevProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prevState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//我们是否要添加新的 items 到列表?")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 捕捉滚动位置，以便我们可以稍后调整滚动.")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prevProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" list "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("listRef"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scrollHeight "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scrollTop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentDidUpdate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prevProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prevState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" snapshot")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//如果我们有snapshot值, 我们已经添加了 新的items.")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 调整滚动以至于这些新的items 不会将旧items推出视图。")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// (这边的snapshot是 getSnapshotBeforeUpdate方法的返回值)")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("snapshot "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" list "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("listRef"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scrollTop "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scrollHeight "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" snapshot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div ref"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("listRef"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* ...contents... */")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"三、参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、参考"}},[t._v("#")]),t._v(" 三、参考")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/38030418",target:"_blank",rel:"noopener noreferrer"}},[t._v("React v16.3之后的组件生命周期函数"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);