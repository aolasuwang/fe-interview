(window.webpackJsonp=window.webpackJsonp||[]).push([[290],{850:function(v,_,e){"use strict";e.r(_);var t=e(10),r=Object(t.a)({},(function(){var v=this,_=v.$createElement,e=v._self._c||_;return e("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[e("h2",{attrs:{id:"一、forever"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、forever"}},[v._v("#")]),v._v(" 一、forever")]),v._v(" "),e("blockquote",[e("p",[e("code",[v._v("forever")]),v._v("则可以在"),e("code",[v._v("cmd")]),v._v("或"),e("code",[v._v("ssh")]),v._v("连接断开时,让项目一直运行,而且可以在项目崩溃时自动重启")])]),v._v(" "),e("ul",[e("li",[v._v("安装 "),e("code",[v._v("npm install -g forever")])]),v._v(" "),e("li",[e("code",[v._v("forever")]),v._v("的帮助手册  "),e("code",[v._v("forever --help")])]),v._v(" "),e("li",[v._v("使用"),e("code",[v._v("forever")]),v._v("启动项目 "),e("code",[v._v("forever start app.js")])]),v._v(" "),e("li",[v._v("使用"),e("code",[v._v("forever")]),v._v("停止项目 "),e("code",[v._v("forever stop app.js")])]),v._v(" "),e("li",[v._v("列出所有通过"),e("code",[v._v("forever")]),v._v("管理的项目 "),e("code",[v._v("forever list")])]),v._v(" "),e("li",[v._v("监视项目中的文件,当文件有变动时重启项目 "),e("code",[v._v("forever -w start app.js")])])]),v._v(" "),e("h2",{attrs:{id:"二、pm2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、pm2"}},[v._v("#")]),v._v(" 二、pm2")]),v._v(" "),e("blockquote",[e("p",[v._v("部署参考 http://blog.poetries.top/2018/11/18/react-ssr-next-deploy/")])]),v._v(" "),e("ul",[e("li",[v._v("安装pm2 "),e("code",[v._v("npm install -g pm2")])]),v._v(" "),e("li",[v._v("运行"),e("code",[v._v("pm2 start app.js")])]),v._v(" "),e("li",[v._v("查看运行状态 "),e("code",[v._v("pm2 list")])]),v._v(" "),e("li",[v._v("追踪资源运行情况 "),e("code",[v._v("pm2 monit")])]),v._v(" "),e("li",[v._v("查看日志 "),e("code",[v._v("pm2 logs")])]),v._v(" "),e("li",[v._v("重启应用 "),e("code",[v._v("pm2 restart appId")])]),v._v(" "),e("li",[v._v("停止应用  "),e("code",[v._v("pm2 stop app.js")])]),v._v(" "),e("li",[v._v("开启"),e("code",[v._v("api")]),v._v("访问 "),e("code",[v._v("pm2 web")])])]),v._v(" "),e("p",[e("strong",[v._v("预定义运行配置文件")])]),v._v(" "),e("blockquote",[e("p",[v._v("我们可以预定义一个配置文件，然后制定运行这个配置文件，比如我们定义一个文件"),e("code",[v._v("process.json")]),v._v("，内容如下")])]),v._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[v._v('{\n  "apps": [\n    {\n      "name": "ANodeBlog",\n      "script": "bin/www",\n      "watch": "../",\n      "log_date_format": "YYYY-MM-DD HH:mm Z"\n    }\n  ]\n}\n')])])]),e("ul",[e("li",[v._v("然后"),e("code",[v._v("pm2 start process.json")])])]),v._v(" "),e("p",[e("strong",[v._v("pm2与forever对比")])]),v._v(" "),e("table",[e("thead",[e("tr",[e("th",[v._v("Feature")]),v._v(" "),e("th",[v._v("Forever")]),v._v(" "),e("th",[v._v("PM2")])])]),v._v(" "),e("tbody",[e("tr",[e("td",[v._v("Keep Alive")]),v._v(" "),e("td",[v._v("✔")]),v._v(" "),e("td",[v._v("✔")])]),v._v(" "),e("tr",[e("td",[v._v("Coffeescript")]),v._v(" "),e("td",[v._v("✔")]),v._v(" "),e("td")]),v._v(" "),e("tr",[e("td",[v._v("Log aggregation")]),v._v(" "),e("td"),v._v(" "),e("td",[v._v("✔")])]),v._v(" "),e("tr",[e("td",[v._v("API")]),v._v(" "),e("td"),v._v(" "),e("td",[v._v("✔")])]),v._v(" "),e("tr",[e("td",[v._v("Terminal monitoring")]),v._v(" "),e("td"),v._v(" "),e("td",[v._v("✔")])]),v._v(" "),e("tr",[e("td",[v._v("Clustering")]),v._v(" "),e("td"),v._v(" "),e("td",[v._v("✔")])]),v._v(" "),e("tr",[e("td",[v._v("JSON configuration")]),v._v(" "),e("td"),v._v(" "),e("td",[v._v("✔")])])])])])}),[],!1,null,null,null);_.default=r.exports}}]);